{"version":3,"sources":["diagramy.min.js","/source/diagramy.min.js"],"names":["f","exports","module","define","window","g","Diagramy","e","global","require","s","this","n","call","l","t","i","o",1,"Gridy","r","length","Integer2","x","y","prototype","v","distance","b","Math","floor","abs","toString","equals","p","add","scale","d","cubeLength","Float2","round","h","rx","ry","lerp","a","line","N","results","push","max","k","join","__extends","__","constructor","hasOwnProperty","Position","_super","apply","arguments","Rectangle","minX","maxX","minY","maxY","Search","start","maxMovement","maxMagnitude","blocked","available","_this","cost","previous","fringes","forEach","tile","neighbors","dir","neighbor","undefined","path","end","node","d3","Diagram","svg","grid","animation","fontSize","duration","data","_polygons","_centers","_circles","_coordinates","_tileCoordinates","root","append","paths","init","nodes","initRoot","tilesEnter","initTiles","polygons","centers","circles","coordinates","tileCoordinates","show","tiles","selectAll","remove","tileTypes","shapePath","attr","getTileType","transition","orientation","angle","radius","each","toPoint","selection","select","text","labels","vertices","highlight","classed","tileSet","set","has","center","search","from","to","style","color","interpolate","key","point","xy","pointElement","position","translate","mousePoint","on","mouse","bounds","parseFloat","map","tileKey","exit","enter","empty","tileType","toFixed","delta","self"],"mappings":"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","file":"diagramy.min.js","sourcesContent":["!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var i;i=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,i.Diagramy=t()}}(function(){return function t(i,e,s){function n(o,a){if(!e[o]){if(!i[o]){var l=\"function\"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error(\"Cannot find module '\"+o+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=e[o]={exports:{}};i[o][0].call(c.exports,function(t){var e=i[o][1][t];return n(e?e:t)},c,c.exports,t,i,e,s)}return e[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,i,e){(function(e){var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.v=function(){return[this.x,this.y]},t.prototype.distance=function(t){return Math.floor((Math.abs(this.x-t.x)+Math.abs(this.y-t.y))/2)},t.prototype.toString=function(){return this.x+\",\"+this.y},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.scale=function(i){return new t(this.x*i,this.y*i)},t.prototype.cubeLength=function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y))/2)},t}();t.Integer2=i}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return i.round=function(i){var e=Math.round(i.x),s=Math.round(i.y);return new t.Integer2(e,s)},i.lerp=function(t,e,s){return new i(t.x+(e.x-t.x)*s,t.y+(e.y-t.y)*s)},i.line=function(t,e){for(var s=t.distance(e),n=[],r=0;s+1>r;r++)n.push(i.round(i.lerp(t,e,1/Math.max(1,s)*r)));return n},i.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},i.prototype.v=function(){return[this.x,this.y]},i.prototype.scale=function(t){return new i(this.x*t,this.y*t)},i.prototype.toString=function(){return this.v().join(\",\")},i}();t.Float2=i}(s||(s={}));var s,n=this.__extends||function(t,i){function e(){this.constructor=t}for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);e.prototype=i.prototype,t.prototype=new e};!function(t){\"use strict\";var i=function(t){function i(){t.apply(this,arguments)}return n(i,t),i}(t.Integer2);t.Position=i}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i,e,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minX=t,this.maxX=i,this.minY=e,this.maxY=s}return t.add=function(i,e){return new t(i.minX+e.minX,i.maxX+e.maxX,i.minY+e.minY,i.maxY+e.maxY)},t}();t.Rectangle=i}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i,e,s,n){var r=this;void 0===n&&(n=null),this.cost={},this.previous={},this.max=0,this.start=t,this.cost[t.toString()]=0,this.previous[t.toString()]=null;for(var o=[[t]],a=0;i>a&&o[a].length>0;a++)o[a+1]=[],o[a].forEach(function(t){for(var i=t.neighbors(),l=0;l<i.length;l++){var h=i[l];(!n||n[h.toString()])&&void 0===r.cost[h.toString()]&&!s[h.toString()]&&h.cubeLength()<=e&&(r.cost[h.toString()]=a+1,r.max=Math.max(r.max,a+1),r.previous[h.toString()]=t,o[a+1].push(h))}})}return t.prototype.path=function(t){for(var i=[],e=t;e;)i.push(e),e=e.equals(this.start)?null:this.previous[e.toString()];return i},t}();t.Search=i}(s||(s={}));var r;!function(i){\"use strict\";var n=e.d3||t(\"d3\"),r=function(){function t(t,i,e){void 0===e&&(e=!0),this.fontSize=14,this.duration=0,this.data={},this._polygons=!0,this._centers=!1,this._circles=!1,this._coordinates=!1,this._tileCoordinates=!1,this.svg=t,this.grid=i,this.animation=e,this.root=t.append(\"g\"),this.paths=t.append(\"g\"),this.init()}return t.prototype.init=function(){this.nodes&&(this.duration=800),this.initRoot();var t=this.initTiles();return this._polygons&&this.polygons(t),this._centers&&this.centers(t),this._circles&&this.circles(t),this._coordinates&&this.coordinates(t),this._tileCoordinates&&this.tileCoordinates(t),this},t.prototype.polygons=function(t){var i=this;void 0===t&&(t=!0);var e;if(t===!1)return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").remove(),this._polygons=!1,this;t!==!0||this._polygons?t!==!0&&(e=t.selectAll(\"g.polygon\"),e.append(\"polygon\")):(e=this.tiles.selectAll(\"g.polygon\"),e.append(\"polygon\"),this._polygons=!0);for(var s=this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\"),n=[],r=0;r<this.grid.tileTypes;r++)n.push(this.shapePath(r));return 1===this.grid.tileTypes?s.attr(\"points\",n[0]):s.attr(\"points\",function(t){return n[i.grid.getTileType(i.data[t].tile)]}),this.transition(s).attr(\"transform\",\"rotate(\"+this.grid.orientation*this.grid.angle+\")\"),this},t.prototype.centers=function(t){void 0===t&&(t=!0);var i;return t===!1?(this.tiles.selectAll(\"g.center\").selectAll(\"circle\").remove(),this._centers=!1,this):(t!==!0||this._centers?t!==!0&&(i=t.selectAll(\"g.center\"),i.append(\"circle\").attr(\"class\",\"center\").attr(\"r\",5)):(i=this.tiles.selectAll(\"g.center\"),i.append(\"circle\").attr(\"class\",\"center\").attr(\"r\",5),this._centers=!0),this)},t.prototype.circles=function(t){void 0===t&&(t=!0);var i;return t===!1?(this.tiles.selectAll(\"g.circle\").selectAll(\"circle\").remove(),this._circles=!1,this):(t!==!0||this._circles?t!==!0&&(i=t.selectAll(\"g.circle\"),i.append(\"circle\").attr(\"class\",\"circle\")):(i=this.tiles.selectAll(\"g.circle\"),i.append(\"circle\").attr(\"class\",\"circle\"),this._circles=!0),this.transition(this.tiles.selectAll(\"g.circle\").selectAll(\"circle\")).attr(\"r\",this.grid.radius),this)},t.prototype.coordinates=function(t){void 0===t&&(t=!0);var i;if(t===!1)return this.tiles.selectAll(\"g.coordinates\").selectAll(\"text\").remove(),this._coordinates=!1,this;if(t!==!0||this._coordinates?t!==!0&&(i=t.selectAll(\"g.coordinates\")):(i=this.tiles.selectAll(\"g.coordinates\"),this._coordinates=!0),i){var e=this;i.append(\"text\").attr(\"y\",\"0.4em\").each(function(t){var i=e.grid.toPoint(e.data[t].tile),s=n.select(this);s.append(\"tspan\").attr(\"class\",\"x\").text(i.x),s.append(\"tspan\").text(\", \"),s.append(\"tspan\").attr(\"class\",\"y\").text(i.y)})}return this},t.prototype.tileCoordinates=function(t){void 0===t&&(t=!0);var i;if(t===!1)return this.tiles.selectAll(\"g.tile-coordinates\").selectAll(\"text\").remove(),this._tileCoordinates=!1,this;if(t!==!0||this._tileCoordinates?t!==!0&&(this.tiles.selectAll(\"g.tile-coordinates\").selectAll(\"text\").remove(),i=this.tiles.selectAll(\"g.tile-coordinates\")):(i=this.tiles.selectAll(\"g.tile-coordinates\"),this._tileCoordinates=!0),i){var e=this;i.append(\"text\").attr(\"y\",\"0.4em\").each(function(t){var i=n.select(this),s=e.data[t].tile.v();0===s[0]&&0===s[1]&&0===s[2]&&(s=[\"x\",\"y\",\"z\"]),s[2]===!0?s[2]=\"T\":s[2]===!1&&(s[2]=\"F\"),i.append(\"tspan\").attr(\"class\",\"q\").text(s[0]),i.append(\"tspan\").attr(\"class\",\"s\").text(s[1]),i.append(\"tspan\").attr(\"class\",\"r\").text(s[2])});var s=this.grid.vertices(this.grid.orientation,this.grid.scale-1.5*this.fontSize);this.tiles.select(\".q\").attr(\"x\",s[0].x).attr(\"y\",s[0].y+.4*this.fontSize),this.tiles.select(\".s\").attr(\"x\",s[2].x).attr(\"y\",s[2].y+.4*this.fontSize),s.length>4?this.tiles.select(\".r\").attr(\"x\",s[4].x).attr(\"y\",s[4].y+.4*this.fontSize):s.length>=3&&this.tiles.select(\".r\").attr(\"x\",s[1].x).attr(\"y\",s[1].y+.4*this.fontSize)}return this},t.prototype.highlight=function(t,i){var e=this;void 0===i&&(i=\"highlight\");var s=n.set(t);return this.tiles.classed(i,function(t){return s.has(e.data[t].tile)}),this},t.prototype.path=function(t){if(this.paths.selectAll(\"*\").remove(),!t||!t.length)return this;for(var i=this.paths.append(\"path\").attr(\"d\",\"M 0 0\").attr(\"class\",\"path\"),e=[],s=0;s<t.length;s++)e.push(0===s?\"M\":\"L\"),e.push(this.grid.center(t[s]).toString());return i.attr(\"d\",e.join(\" \")),this},t.prototype.search=function(t,i,e){var s=this;if(void 0===i&&(i=\"hsl(90, 80%, 80%)\"),void 0===e&&(e=\"hsl(200, 80%, 80%)\"),!t)return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").style(\"fill\",null),this;var r=n.interpolate(i,e);return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").style(\"fill\",function(i){var e=t.cost[s.data[i].key];return e>=0?r(e/(t.max||1)):null}),this},t.prototype.point=function(t){var i=this;this.pointElement||(this.pointElement=this.svg.append(\"circle\"),this.pointElement.attr(\"class\",\"marker\").attr(\"r\",5));var e=this.grid.position(new s.Float2(t[0],t[1]));return this.pointElement.attr(\"transform\",\"translate(\"+(t[0]+this.translate.x)+\",\"+(t[1]+this.translate.y)+\")\"),this.tiles.classed(\"highlight\",function(t){return i.data[t].tile.equals(e)}),this},t.prototype.mousePoint=function(){var t=this;return this.svg.on(\"mousemove\",function(){var i=n.mouse(t.root.node());t.point(i)}),this},t.prototype.initRoot=function(){var t=this.grid.bounds();this.translate=new s.Float2((parseFloat(this.svg.attr(\"width\"))-t.minX-t.maxX)/2,(parseFloat(this.svg.attr(\"height\"))-t.minY-t.maxY)/2),this.transition(this.root).attr(\"transform\",\"translate(\"+this.translate+\")\"),this.transition(this.paths).attr(\"transform\",\"translate(\"+this.translate+\")\")},t.prototype.initTiles=function(){var t=this;this.nodes=this.grid.tiles.map(function(i){var e={tile:i,key:i.toString(),tileKey:t.grid.toPoint(i).toString()};return t.data[e.tileKey]=e,e.tileKey}),this.tiles=this.root.selectAll(\"g.tile\").data(this.nodes,function(t){return t}),this.transition(this.tiles.exit(),.5).style(\"opacity\",0).remove();var i=this.tiles.enter().append(\"g\").attr(\"class\",\"tile\").style(\"opacity\",this.animation?0:1).attr(\"transform\",function(i){var e=t.grid.center(t.data[i].tile);return\"translate(\"+e.x+\",\"+e.y+\")\"});return i.append(\"g\").attr(\"class\",\"polygon\").empty(),i.append(\"g\").attr(\"class\",\"center\").empty(),i.append(\"g\").attr(\"class\",\"circle\").empty(),i.append(\"g\").attr(\"class\",\"coordinates\").empty(),i.append(\"g\").attr(\"class\",\"tile-coordinates\").empty(),this.transition(this.tiles).attr(\"transform\",function(i){var e=t.grid.center(t.data[i].tile);return\"translate(\"+e.x+\",\"+e.y+\")\"}).style(\"opacity\",1),i},t.prototype.shapePath=function(t){return this.grid.vertices(null,null,t).map(function(t){return t.x.toFixed(3)+\",\"+t.y.toFixed(3)}).join(\" \")},t.prototype.transition=function(t,i){return void 0===i&&(i=1),this.animation&&this.duration*i?t.transition().duration(this.duration*i):t},t}();i.Diagram=r}(r||(r={})),i.exports=r}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{d3:void 0}]},{},[1])(1)});\n//# sourceMappingURL=diagramy.min.js.map","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var i;i=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,i.Diagramy=t()}}(function(){return function t(i,e,s){function n(o,a){if(!e[o]){if(!i[o]){var l=\"function\"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error(\"Cannot find module '\"+o+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=e[o]={exports:{}};i[o][0].call(c.exports,function(t){var e=i[o][1][t];return n(e?e:t)},c,c.exports,t,i,e,s)}return e[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,i,e){(function(e){var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.v=function(){return[this.x,this.y]},t.prototype.distance=function(t){return Math.floor((Math.abs(this.x-t.x)+Math.abs(this.y-t.y))/2)},t.prototype.toString=function(){return this.x+\",\"+this.y},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.scale=function(i){return new t(this.x*i,this.y*i)},t.prototype.cubeLength=function(){return Math.floor((Math.abs(this.x)+Math.abs(this.y))/2)},t}();t.Integer2=i}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return i.round=function(i){var e=Math.round(i.x),s=Math.round(i.y);return new t.Integer2(e,s)},i.lerp=function(t,e,s){return new i(t.x+(e.x-t.x)*s,t.y+(e.y-t.y)*s)},i.line=function(t,e){for(var s=t.distance(e),n=[],r=0;s+1>r;r++)n.push(i.round(i.lerp(t,e,1/Math.max(1,s)*r)));return n},i.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},i.prototype.v=function(){return[this.x,this.y]},i.prototype.scale=function(t){return new i(this.x*t,this.y*t)},i.prototype.toString=function(){return this.v().join(\",\")},i}();t.Float2=i}(s||(s={}));var s,n=this.__extends||function(t,i){function e(){this.constructor=t}for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);e.prototype=i.prototype,t.prototype=new e};!function(t){\"use strict\";var i=function(t){function i(){t.apply(this,arguments)}return n(i,t),i}(t.Integer2);t.Position=i}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i,e,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minX=t,this.maxX=i,this.minY=e,this.maxY=s}return t.add=function(i,e){return new t(i.minX+e.minX,i.maxX+e.maxX,i.minY+e.minY,i.maxY+e.maxY)},t}();t.Rectangle=i}(s||(s={}));var s;!function(t){\"use strict\"}(s||(s={}));var s;!function(t){\"use strict\";var i=function(){function t(t,i,e,s,n){var r=this;void 0===n&&(n=null),this.cost={},this.previous={},this.max=0,this.start=t,this.cost[t.toString()]=0,this.previous[t.toString()]=null;for(var o=[[t]],a=0;i>a&&o[a].length>0;a++)o[a+1]=[],o[a].forEach(function(t){for(var i=t.neighbors(),l=0;l<i.length;l++){var h=i[l];(!n||n[h.toString()])&&void 0===r.cost[h.toString()]&&!s[h.toString()]&&h.cubeLength()<=e&&(r.cost[h.toString()]=a+1,r.max=Math.max(r.max,a+1),r.previous[h.toString()]=t,o[a+1].push(h))}})}return t.prototype.path=function(t){for(var i=[],e=t;e;)i.push(e),e=e.equals(this.start)?null:this.previous[e.toString()];return i},t}();t.Search=i}(s||(s={}));var r;!function(i){\"use strict\";var n=e.d3||t(\"d3\"),r=function(){function t(t,i,e){void 0===e&&(e=!0),this.fontSize=14,this.duration=0,this.data={},this._polygons=!0,this._centers=!1,this._circles=!1,this._coordinates=!1,this._tileCoordinates=!1,this.svg=t,this.grid=i,this.animation=e,this.root=t.append(\"g\"),this.paths=t.append(\"g\"),this.init()}return t.prototype.init=function(){this.nodes&&(this.duration=800),this.initRoot();var t=this.initTiles();return this._polygons&&this.polygons(t),this._centers&&this.centers(t),this._circles&&this.circles(t),this._coordinates&&this.coordinates(t),this._tileCoordinates&&this.tileCoordinates(t),this},t.prototype.polygons=function(t){var i=this;void 0===t&&(t=!0);var e;if(t===!1)return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").remove(),this._polygons=!1,this;t!==!0||this._polygons?t!==!0&&(e=t.selectAll(\"g.polygon\"),e.append(\"polygon\")):(e=this.tiles.selectAll(\"g.polygon\"),e.append(\"polygon\"),this._polygons=!0);for(var s=this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\"),n=[],r=0;r<this.grid.tileTypes;r++)n.push(this.shapePath(r));return 1===this.grid.tileTypes?s.attr(\"points\",n[0]):s.attr(\"points\",function(t){return n[i.grid.getTileType(i.data[t].tile)]}),this.transition(s).attr(\"transform\",\"rotate(\"+this.grid.orientation*this.grid.angle+\")\"),this},t.prototype.centers=function(t){void 0===t&&(t=!0);var i;return t===!1?(this.tiles.selectAll(\"g.center\").selectAll(\"circle\").remove(),this._centers=!1,this):(t!==!0||this._centers?t!==!0&&(i=t.selectAll(\"g.center\"),i.append(\"circle\").attr(\"class\",\"center\").attr(\"r\",5)):(i=this.tiles.selectAll(\"g.center\"),i.append(\"circle\").attr(\"class\",\"center\").attr(\"r\",5),this._centers=!0),this)},t.prototype.circles=function(t){void 0===t&&(t=!0);var i;return t===!1?(this.tiles.selectAll(\"g.circle\").selectAll(\"circle\").remove(),this._circles=!1,this):(t!==!0||this._circles?t!==!0&&(i=t.selectAll(\"g.circle\"),i.append(\"circle\").attr(\"class\",\"circle\")):(i=this.tiles.selectAll(\"g.circle\"),i.append(\"circle\").attr(\"class\",\"circle\"),this._circles=!0),this.transition(this.tiles.selectAll(\"g.circle\").selectAll(\"circle\")).attr(\"r\",this.grid.radius),this)},t.prototype.coordinates=function(t){void 0===t&&(t=!0);var i;if(t===!1)return this.tiles.selectAll(\"g.coordinates\").selectAll(\"text\").remove(),this._coordinates=!1,this;if(t!==!0||this._coordinates?t!==!0&&(i=t.selectAll(\"g.coordinates\")):(i=this.tiles.selectAll(\"g.coordinates\"),this._coordinates=!0),i){var e=this;i.append(\"text\").attr(\"y\",\"0.4em\").each(function(t){var i=e.grid.toPoint(e.data[t].tile),s=n.select(this);s.append(\"tspan\").attr(\"class\",\"x\").text(i.x),s.append(\"tspan\").text(\", \"),s.append(\"tspan\").attr(\"class\",\"y\").text(i.y)})}return this},t.prototype.tileCoordinates=function(t){void 0===t&&(t=!0);var i;if(t===!1)return this.tiles.selectAll(\"g.tile-coordinates\").selectAll(\"text\").remove(),this._tileCoordinates=!1,this;if(t!==!0||this._tileCoordinates?t!==!0&&(this.tiles.selectAll(\"g.tile-coordinates\").selectAll(\"text\").remove(),i=this.tiles.selectAll(\"g.tile-coordinates\")):(i=this.tiles.selectAll(\"g.tile-coordinates\"),this._tileCoordinates=!0),i){var e=this;i.append(\"text\").attr(\"y\",\"0.4em\").each(function(t){var i=n.select(this),s=e.data[t].tile.v();0===s[0]&&0===s[1]&&0===s[2]&&(s=[\"x\",\"y\",\"z\"]),s[2]===!0?s[2]=\"T\":s[2]===!1&&(s[2]=\"F\"),i.append(\"tspan\").attr(\"class\",\"q\").text(s[0]),i.append(\"tspan\").attr(\"class\",\"s\").text(s[1]),i.append(\"tspan\").attr(\"class\",\"r\").text(s[2])});var s=this.grid.vertices(this.grid.orientation,this.grid.scale-1.5*this.fontSize);this.tiles.select(\".q\").attr(\"x\",s[0].x).attr(\"y\",s[0].y+.4*this.fontSize),this.tiles.select(\".s\").attr(\"x\",s[2].x).attr(\"y\",s[2].y+.4*this.fontSize),s.length>4?this.tiles.select(\".r\").attr(\"x\",s[4].x).attr(\"y\",s[4].y+.4*this.fontSize):s.length>=3&&this.tiles.select(\".r\").attr(\"x\",s[1].x).attr(\"y\",s[1].y+.4*this.fontSize)}return this},t.prototype.highlight=function(t,i){var e=this;void 0===i&&(i=\"highlight\");var s=n.set(t);return this.tiles.classed(i,function(t){return s.has(e.data[t].tile)}),this},t.prototype.path=function(t){if(this.paths.selectAll(\"*\").remove(),!t||!t.length)return this;for(var i=this.paths.append(\"path\").attr(\"d\",\"M 0 0\").attr(\"class\",\"path\"),e=[],s=0;s<t.length;s++)e.push(0===s?\"M\":\"L\"),e.push(this.grid.center(t[s]).toString());return i.attr(\"d\",e.join(\" \")),this},t.prototype.search=function(t,i,e){var s=this;if(void 0===i&&(i=\"hsl(90, 80%, 80%)\"),void 0===e&&(e=\"hsl(200, 80%, 80%)\"),!t)return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").style(\"fill\",null),this;var r=n.interpolate(i,e);return this.tiles.selectAll(\"g.polygon\").selectAll(\"polygon\").style(\"fill\",function(i){var e=t.cost[s.data[i].key];return e>=0?r(e/(t.max||1)):null}),this},t.prototype.point=function(t){var i=this;this.pointElement||(this.pointElement=this.svg.append(\"circle\"),this.pointElement.attr(\"class\",\"marker\").attr(\"r\",5));var e=this.grid.position(new s.Float2(t[0],t[1]));return this.pointElement.attr(\"transform\",\"translate(\"+(t[0]+this.translate.x)+\",\"+(t[1]+this.translate.y)+\")\"),this.tiles.classed(\"highlight\",function(t){return i.data[t].tile.equals(e)}),this},t.prototype.mousePoint=function(){var t=this;return this.svg.on(\"mousemove\",function(){var i=n.mouse(t.root.node());t.point(i)}),this},t.prototype.initRoot=function(){var t=this.grid.bounds();this.translate=new s.Float2((parseFloat(this.svg.attr(\"width\"))-t.minX-t.maxX)/2,(parseFloat(this.svg.attr(\"height\"))-t.minY-t.maxY)/2),this.transition(this.root).attr(\"transform\",\"translate(\"+this.translate+\")\"),this.transition(this.paths).attr(\"transform\",\"translate(\"+this.translate+\")\")},t.prototype.initTiles=function(){var t=this;this.nodes=this.grid.tiles.map(function(i){var e={tile:i,key:i.toString(),tileKey:t.grid.toPoint(i).toString()};return t.data[e.tileKey]=e,e.tileKey}),this.tiles=this.root.selectAll(\"g.tile\").data(this.nodes,function(t){return t}),this.transition(this.tiles.exit(),.5).style(\"opacity\",0).remove();var i=this.tiles.enter().append(\"g\").attr(\"class\",\"tile\").style(\"opacity\",this.animation?0:1).attr(\"transform\",function(i){var e=t.grid.center(t.data[i].tile);return\"translate(\"+e.x+\",\"+e.y+\")\"});return i.append(\"g\").attr(\"class\",\"polygon\").empty(),i.append(\"g\").attr(\"class\",\"center\").empty(),i.append(\"g\").attr(\"class\",\"circle\").empty(),i.append(\"g\").attr(\"class\",\"coordinates\").empty(),i.append(\"g\").attr(\"class\",\"tile-coordinates\").empty(),this.transition(this.tiles).attr(\"transform\",function(i){var e=t.grid.center(t.data[i].tile);return\"translate(\"+e.x+\",\"+e.y+\")\"}).style(\"opacity\",1),i},t.prototype.shapePath=function(t){return this.grid.vertices(null,null,t).map(function(t){return t.x.toFixed(3)+\",\"+t.y.toFixed(3)}).join(\" \")},t.prototype.transition=function(t,i){return void 0===i&&(i=1),this.animation&&this.duration*i?t.transition().duration(this.duration*i):t},t}();i.Diagram=r}(r||(r={})),i.exports=r}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{d3:void 0}]},{},[1])(1)});\n//# sourceMappingURL=diagramy.min.js.map"],"sourceRoot":"/source/"}